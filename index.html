<!DOCTYPE html>
<html style="height: 100%;" class=" j-feature-js j-feature-no-touch j-feature-opacity j-feature-csstransitions video videoautoplay" lang="de-DE"><head>
<meta charset="utf-8"/>
<title>Tool</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<body class="body cc-page cc-page-index cc-indexpage cc-pagemode-default cc-content-parent jqbga-container jqbga-web--image" id="page-1621009975" style="position: relative; min-height: 100%; top: 0px;">

</div><div id="cc-m-8396781875" class="j-module n j-htmlCode ">
<div id="wscript" align="center">
	<div class="LGListItem dummyItem">
		<select type="text" class="LGListItemName">
			<option value="3">						Aachener Dom					</option>
			<option value="8">						Alcatraz					</option>
			<option value="13" selected="selected">						Arche					</option>
			<option value="14">						Arktische Orangerie					</option>
			<option value="15">						Atlantis Museum					</option>
			<option value="9">						Atomium					</option>
			<option value="5">						Basilius-Kathedrale					</option>
			<option value="15">						Blaue Galaxie					</option>
			<option value="16">						Burg Himeji					</option>
			<option value="10">						Cape Canaveral					</option>
			<option value="5">						Castel del Monte					</option>
			<option value="8">						Château Frontenac					</option>
			<option value="10">						Das Habitat					</option>
			<option value="6">						Deal Castle					</option>
			<option value="6">						Desdner Frauenkirche					</option>
			<option value="12">						Dynamischer Turm					</option>
			<option value="14">						Gaea-Statue					</option>
			<option value="3">						Hagia Sophia					</option>
			<option value="11">						Innovation Tower					</option>
			<option value="7">						Kapitol					</option>
			<option value="2">						Kolosseum					</option>
			<option value="15">						Kraken					</option>
			<option value="1">						Turm zu Babel					</option>
			<option value="2">						Leuchtturm v. Alexandria					</option>
			<option value="11">						Lotustempel					</option>
			<option value="4">						Markusdom					</option>
			<option value="4">						Notre Dame					</option>
			<option value="0">						Observatorium					</option>
			<option value="13">						Regenwald-Projekt					</option>
			<option value="0">						Relikttempel					</option>
			<option value="7">						Royal Albert Hall					</option>
			<option value="14">						Saatgut-Tresor					</option>
			<option value="9">						Space Needle					</option>
			<option value="17">						Star Gazer					</option>
			<option value="16">						Terrakotta-Armee					</option>
			<option value="12">						Voyager V1					</option>
			<option value="17">						Virgo-Projekt					</option>
			<option value="18">						Weltraumfrachter					</option>
			<option value="1">						Zeus				</option>
		</select> 
		<label class="gbtext">Level:</label> <input min="1" max="999" value="1" class="LGListItemLevel" type="number">
		<button class="LGListItemPlus">+</button>
		<button class="LGListItemMinus">-</button>
		<button class="LGListItemActive">></button>
	</div>
	<div id="LGList" ></div>
	
    <!--<div id="LGValues" class="outerdiv">
		<div class="secondValue floatie">
				<button id="secondValueSwitch" target="_self"><></button> 
                <select type="text" id="secondValueLG">
                    <option value="3">						Aachener Dom					</option>
                    <option value="8">						Alcatraz					</option>
                    <option value="13" selected="selected">						Arche					</option>
                    <option value="14">						Arktische Orangerie					</option>
                    <option value="15">						Atlantis Museum					</option>
                    <option value="9">						Atomium					</option>
                    <option value="5">						Basilius-Kathedrale					</option>
                    <option value="15">						Blaue Galaxie					</option>
                    <option value="16">						Burg Himeji					</option>
                    <option value="10">						Cape Canaveral					</option>
                    <option value="5">						Castel del Monte					</option>
                    <option value="8">						Château Frontenac					</option>
                    <option value="10">						Das Habitat					</option>
                    <option value="6">						Deal Castle					</option>
                    <option value="6">						Desdner Frauenkirche					</option>
                    <option value="12">						Dynamischer Turm					</option>
                    <option value="14">						Gaea-Statue					</option>
                    <option value="3">						Hagia Sophia					</option>
                    <option value="11">						Innovation Tower					</option>
                    <option value="7">						Kapitol					</option>
                    <option value="2">						Kolosseum					</option>
                    <option value="15">						Kraken					</option>
                    <option value="1">						Turm zu Babel					</option>
                    <option value="2">						Leuchtturm v. Alexandria					</option>
                    <option value="11">						Lotustempel					</option>
                    <option value="4">						Markusdom					</option>
                    <option value="4">						Notre Dame					</option>
                    <option value="0">						Observatorium					</option>
                    <option value="13">						Regenwald-Projekt					</option>
                    <option value="0">						Relikttempel					</option>
                    <option value="7">						Royal Albert Hall					</option>
                    <option value="14">						Saatgut-Tresor					</option>
                    <option value="9">						Space Needle					</option>
                    <option value="16">						Terrakotta-Armee					</option>
                    <option value="12">						Voyager V1					</option>
                    <option value="1">						Zeusstatue					</option>

                </select> 
					<label class="gbtext">Level:</label> <input min="1" max="999" value="1" id="secondValueLevel" type="number">
					<div style="display: none;">
						<input step="0.005" min="1" max="3" value="1.9" id="secp1" type="number">
						<input step="0.005" min="1" max="3" value="1.9" id="secp2" type="number">
						<input step="0.005" min="1" max="3" value="1.9" id="secp3" type="number">
						<input step="0.005" min="1" max="3" value="1.9" id="secp4" type="number">
						<input step="0.005" min="1" max="3" value="1.9" id="secp5" type="number">
					</div>
		</div>
		<div class="floatie">
			<a href="https://diefleissigen.jimdo.com/lg-rechner-die-flei%C3%9Figen-brisgard/lg-informationen/" class="class3" target="_self">LG:&nbsp;&nbsp;</a> <select type="text" id="gbselect">
    <option value="3">
        Aachener Dom
    </option>
    <option value="8">
        Alcatraz
    </option>
    <option value="13" selected="selected">
        Arche
    </option>
    <option value="14">
        Arktische Orangerie
    </option>
    <option value="15">
        Atlantis Museum
    </option>
    <option value="9">
        Atomium
    </option>
    <option value="5">
        Basilius-Kathedrale
    </option>
    <option value="15">
        Blaue Galaxie
    </option>
    <option value="16">						Burg Himeji					</option>
    <option value="10">
        Cape Canaveral
    </option>
    <option value="5">
        Castel del Monte
    </option>
    <option value="8">
        Château Frontenac
    </option>
    <option value="10">
        Das Habitat
    </option>
    <option value="6">
        Deal Castle
    </option>
    <option value="6">
        Desdner Frauenkirche
    </option>
    <option value="12">
        Dynamischer Turm
    </option>
    <option value="14">
        Gaea-Statue
    </option>
    <option value="3">
        Hagia Sophia
    </option>
    <option value="11">
        Innovation Tower
    </option>
    <option value="7">
        Kapitol
    </option>
    <option value="2">
        Kolosseum
    </option>
    <option value="15">
        Kraken
    </option>
    <option value="1">
        Turm zu Babel
    </option>
    <option value="2">
        Leuchtturm v. Alexandria
    </option>
    <option value="11">
        Lotustempel
    </option>
    <option value="4">
        Markusdom
    </option>
    <option value="4">
        Notre Dame
    </option>
    <option value="0">
        Observatorium
    </option>
    <option value="13">
        Regenwald-Projekt
    </option>
    <option value="0">
        Relikttempel
    </option>
    <option value="7">
        Royal Albert Hall
    </option>
    <option value="14">
        Saatgut-Tresor
    </option>
    <option value="9">
        Space Needle
    </option>
    <option value="16">						Terrakotta-Armee					</option>
    <option value="12">
        Voyager V1
    </option>
    <option value="1">
        Zeusstatue
    </option>
</select> <label class="gbtext">Level:</label> <input min="1" max="999" value="1" id="gblevel" type="number"> &nbsp; <label class="totbox">FP-∑:</label> <label class="totbox" id="totalfpdisplay">70</label> &nbsp; &nbsp; &nbsp;<br>
	
		</div>
	</div>
	-->

		<label class="totbox">FP-∑:</label> <label class="totbox" id="totalfpdisplay">70</label> &nbsp;
	<button id="addLGToList">+</button>
	<button id="removeLGfromList">-</button>


		<br>

    <div class="outerdiv">
        <table id="arcboosttable">
            <tbody>
                <tr>
                    <th>
                        Platz
                    </th>
                    <th>
                        Faktor
                    </th>
                    <th>
                        Mäzen
                    </th>
                    <th>
                        Kosten
                    </th>
                    <th>
                        Ext. ⤺
                    </th>
                    <th>
                        Sichern
                    </th>
                    <th>
                        ∑-Sichern
                    </th>
                </tr>

                <tr>
                    <td>
                        P1
                    </td>
                    <td>
                        <input step="0.005" min="1" max="3" value="1.9" id="p1factor" type="number">
                    </td>
                    <td>
                        <div id="p1bonus">10</div>
                    </td>
                    <td>
                        <div id="p1cost">19</div>
                    </td>
                    <td>
                        <div id="p1ext">-</div>
                    </td>
                    <td>
                        <div id="p1save">+32</div>
                    </td>
                    <td>
                        <div id="p1self">32</div>
                    </td>
                </tr>

                <tr>
                    <td>
                        P2
                    </td>
                    <td>
                        <input step="0.005" min="1" max="3" value="1.9" id="p2factor" type="number">
                    </td>
                    <td>
                        <div id="p2bonus">5</div>
                    </td>
                    <td>
                        <div id="p2cost">10</div>
                    </td>
                    <td>
                        <div id="p2ext">-</div>
                    </td>
                    <td>
                        <div id="p2save">Sicher</div>
                    </td>
                    <td>
                        <div id="p2self">-</div>
                    </td>
                </tr>

                <tr>
                    <td>
                        P3
                    </td>
                    <td>
                        <input step="0.005" min="1" max="3" value="1.9" id="p3factor" type="number">
                    </td>
                    <td>
                        <div id="p3bonus">0</div>
                    </td>
                    <td>
                        <div id="p3cost">0</div>
                    </td>
                    <td>
                        <div id="p3ext">-</div>
                    </td>
                    <td>
                        <div id="p3save">+9</div>
                    </td>
                    <td>
                        <div id="p3self">!41!</div>
                    </td>
                </tr>

                <tr>
                    <td>
                        P4
                    </td>
                    <td>
                        <input step="0.005" min="1" max="3" value="1.9" id="p4factor" type="number">
                    </td>
                    <td>
                        <div id="p4bonus">0</div>
                    </td>
                    <td>
                        <div id="p4cost">0</div>
                    </td>
                    <td>
                        <div id="p4ext">-</div>
                    </td>
                    <td>
                        <div id="p4save">Sicher</div>
                    </td>
                    <td>
                        <div id="p4self">-</div>
                    </td>
                </tr>

                <tr>
                    <td>
                        P5
                    </td>
                    <td>
                        <input step="0.005" min="1" max="3" value="1.9" id="p5factor" type="number">
                    </td>
                    <td>
                        <div id="p5bonus">0</div>
                    </td>
                    <td>
                        <div id="p5cost">0</div>
                    </td>
                    <td>
                        <div id="p5ext">-</div>
                    </td>
                    <td>
                        <div id="p5save">Sicher</div>
                    </td>
                    <td>
                        <div id="p5self">-</div>
                    </td>
                </tr>
            </tbody>
        </table>

        <table id="externaltable">
            <tbody>
                <tr>
                    <th>
                        Externe
                    </th>
                </tr>

                <tr>
                    <td>
                        <input min="0" max="999" value="0" id="external1" type="number">
                    </td>
                </tr>

                <tr>
                    <td>
                        <input min="0" max="999" value="0" id="external2" type="number">
                    </td>
                </tr>

                <tr>
                    <td>
                        <input min="0" max="999" value="0" id="external3" type="number">
                    </td>
                </tr>

                <tr>
                    <td>
                        <input min="0" max="999" value="0" id="external4" type="number">
                    </td>
                </tr>

                <tr>
                    <td>
                        <input min="0" max="999" value="0" id="external5" type="number">
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
	<div class="setFactorsContainer">
		<button id="setFactors9">1,9</button>
		<button id="setFactors85">1,85</button>
	</div>
    <h1>
        Überbieten &amp; Sichern
    </h1>

    <div class="outerdiv">
        <label class="extbox">FP-∑ Level:</label> <input min="0" max="99999" value="0" id="outbidgbtotal" type="number"> <label class="extbox">Fp Stand:</label> <input min="0" max="99999" value="0" id="outbidbgfp" type="number"><br>
        <br>
        <label class="extbox">Zu überbieten:</label> <input min="0" max="99999" value="0" id="outbidfp" type="number"> <label class="extbox">Benötigte FP:</label> <label class="extbox" id="outbidneedfp">0</label>
    </div>

    <h1>
        Invest Rechner
    </h1>

    <div class="outerdiv">
        <label class="extbox">Arche Faktor:</label> <input step="0.01" min="1" max="3" value="1.8" id="ownarcfactor" type="number"> <label class="extbox">Mäzen:</label> <input min="0" max="99999" value="0" id="ownarcbasefp" type="number"><br>
        <br>
        <label class="extbox">Benötigte FP:</label> <label class="extbox" id="ownarcneedfp">0</label>
    </div>
    <br>
	<h1>
        Grenzwert
	</h1>
	<div>Zeigt an ab welcher FP Summe die jeweilige Archenstufe in Relation zum Basiswert (z.B 1,9) </br> <b>immer</b> 1, 2, 3... FP zusätzlichen Gewinn bietet (auch vorher  möglich aufgrund von Rundungen)</div>
		
	<div>
		Basis <input step="0.01" min="1" max="3" value="1.9" id="limitbase" type="number"> </br>
		Arche <input min="81" max="999" value="81" id="limitarc" type="number"></div>


		

	<table id="limittable">
		<tbody>
			<tr>
				<th>
					Faktor
				</th>
				<th>
					+1
				</th>
				<th>
					+2
				</th>
				<th>
					+3
				</th>
				<th>
					+4
				</th>
				<th>
					+5
				</th>
				<th>
					+6
				</th>
				<th>
					+7
				</th>
			</tr>

			<tr>
				<td>
					1
				</td>
				<td>
					<div id="limitvalue1"></div>
				</td>
				<td>
					<div id="limitvalue2"></div>
				</td>
				<td>
					<div id="limitvalue3"></div>
				</td>
				<td>
					<div id="limitvalue4"></div>
				</td>
				<td>
					<div id="limitvalue5"></div>
				</td>
				<td>
					<div id="limitvalue6"></div>
				</td>
				<td>
					<div id="limitvalue7"></div>
				</td>
			</tr>
			<tr>
				<td>
					<div id="limitvaluebase">1,9</div>
				</td>
				<td>
					<div id="limitvaluebase1"></div>
				</td>
				<td>
					<div id="limitvaluebase2"></div>
				</td>
				<td>
					<div id="limitvaluebase3"></div>
				</td>
				<td>
					<div id="limitvaluebase4"></div>
				</td>
				<td>
					<div id="limitvaluebase5"></div>
				</td>
				<td>
					<div id="limitvaluebase6"></div>
				</td>
				<td>
					<div id="limitvaluebase7"></div>
				</td>
			</tr>
			<tr>
				<td>
					<div id="limitvaluearc">1,9</div>
				</td>
				<td>
					<div id="limitvaluearc1"></div>
				</td>
				<td>
					<div id="limitvaluearc2"></div>
				</td>
				<td>
					<div id="limitvaluearc3"></div>
				</td>
				<td>
					<div id="limitvaluearc4"></div>
				</td>
				<td>
					<div id="limitvaluearc5"></div>
				</td>
				<td>
					<div id="limitvaluearc6"></div>
				</td>
				<td>
					<div id="limitvaluearc7"></div>
				</td>
			</tr>
		</tbody>
	</table>
	<h1>
		Kopieren in den Gildenchat
	</h1>
	<div class="outerdiv">
		<input id="copyUsername" placeholder="Spielername" type="text" size="8">
		<button id="copyP5" class="active">P5</button>
		<button id="copyP4" class="active">P4</button>
		<button id="copyP3" class="active">P3</button>
		<button id="copyP2" class="active">P2</button>
		<button id="copyP1" class="active">P1</button>

		<button id="copyButton">Kopieren</button></br>
		<input id="copyOutput" type="text" value="hi" size="60">
	</div>
	<script>
	'use strict'
	
	
	
	
	
	
	
// Custom changes. 
$(document).ready(function(){
  initLGList();
  
  //Add new LG
  $('#addLGToList').click(()=>{addLGToList()});
  $('#removeLGfromList').click(()=>{removeLGfromList()});
  $('#LGList').change(()=>{saveLGList()});
  $('#externaltable').change(()=>{
		$('.usedForCalculation').data('Externals', [$('#external1').val(),$('#external2').val(),$('#external3').val(),$('#external4').val(),$('#external5').val()]);
		saveLGList()});
	
});

//Coockie
function initLGList() {
	$('#LGList').empty();
	var LGList = readCookie();

	if(LGList !== null){
		for(let i of LGList){
			let tempListItem = $('.LGListItem.dummyItem').clone();
			tempListItem.removeClass('dummyItem');
			
			tempListItem.find('.LGListItemName option:contains("'+ i.LG +'")').prop('selected', true);
			tempListItem.find('.LGListItemLevel').val(i.Level);
			tempListItem.data('Externals', i.External);
			if(i.Active){
				tempListItem.addClass('usedForCalculation');
			}
			
			tempListItem.appendTo('#LGList');
		}
		recalc();
		
		//Increase level - Event listener
		$('.LGListItemPlus').click(function(){
			let itemLevel = $(this).prev().val();
			itemLevel++
			$(this).prev().val(itemLevel);
			saveLGList();
		});
		
		//Decrease level - Event listener
		$('.LGListItemMinus').click(function(){
			let itemLevel = $(this).prev().prev().val();
			itemLevel--;
			$(this).prev().prev().val(itemLevel);
			saveLGList();
		});
		 
		//Activate LG - Event listener
		$('.LGListItemActive').click(function(){
			$('.usedForCalculation').removeClass('usedForCalculation');
			
			let listItem = $(this).parent();
			listItem.addClass('usedForCalculation');
			
			// Set the external players based on the saved values for the LG
			$('#external1').val(listItem.data('Externals')[0]); 
			$('#external2').val(listItem.data('Externals')[1]);
			$('#external3').val(listItem.data('Externals')[2]);
			$('#external4').val(listItem.data('Externals')[3]);
			$('#external5').val(listItem.data('Externals')[4]);
			
			saveLGList();
			recalc();
		});

	} else {
		//Create an LG list
		addLGToList();
	}
}

// Save current state of the LG list to a cookie
function saveLGList() {
	let tempLGList = [];
	$('#LGList div').each(function(){
		let LGName = $( this ).find('.LGListItemName option:selected').prop('innerText'); 
		let LGLevel = $( this ).find('.LGListItemLevel').val();
		let LGActive = $( this ).hasClass('usedForCalculation');
		let LGExternal = $( this ).data('Externals');
		
		tempLGList.push({LG:LGName,Level:LGLevel,Active:LGActive,External:LGExternal});
	})
	writeCookie(tempLGList);
	recalc();
}


//Add / remove new line
function addLGToList() {
	var LGList = readCookie();
	if(LGList !== null){
		LGList.push({LG:"Arche",Level:1,Active:false,External:[0,0,0,0,0]});
	} else {
		LGList = [{LG:"Arche",Level:1,Active:true,External:[0,0,0,0,0]}];
	}
	
	writeCookie(LGList);
	initLGList();
}

function removeLGfromList() {
	var LGList = readCookie();
	
	LGList.pop();
	
	writeCookie(LGList);
	initLGList();
}

//Save/Read/Delete Cookie
function writeCookie(value) {
	var name = "LGListStorage";
	var cookie = JSON.stringify(value);
	localStorage.setItem(name, cookie);
}

function readCookie() {
	var name = "LGListStorage";
	var value = localStorage.getItem(name);
	var result = JSON.parse(value);
	return result;

}

function deleteCookie() {
 var name = "LGListStorage";
  document.cookie = [name, '=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/;'].join('');
}

// Set to 1,85 or 1,9
document.getElementById("setFactors9").addEventListener("click", function () {
	document.getElementById("p1factor").value = 1.9;
	document.getElementById("p2factor").value = 1.9;
	document.getElementById("p3factor").value = 1.9;
	document.getElementById("p4factor").value = 1.9;
	document.getElementById("p5factor").value = 1.9;
	recalc();
});

document.getElementById("setFactors85").addEventListener("click", function () {
	document.getElementById("p1factor").value = 1.85;
	document.getElementById("p2factor").value = 1.85;
	document.getElementById("p3factor").value = 1.85;
	document.getElementById("p4factor").value = 1.85;
	document.getElementById("p5factor").value = 1.85;
	recalc();
});


// Limittable (Grenzwert)
document.getElementById("limitbase").addEventListener("change", limitCalc);
document.getElementById("limitarc").addEventListener("change", limitCalc);

function limitCalc() {
	let limitBase = $('#limitbase').val();
	localStorage.setItem("limitbase", limitBase);


	let limitArc = $('#limitarc').val();
	localStorage.setItem("limitarc", limitArc);
	if(limitArc < 81) {return;}
	// Errechne aus Stufe der Arche deren Bonus (ab Stufe 80)
	let limitArcBase = 1.9 + (0.001 * (limitArc - 80));

	let limitresults = [];

	let FPValue = 1;
	let iterations = 0;
	let successCount = 0;
	while (iterations <= 7) {
		// Berechne den Bonus mit Basiswert (limitBase) und höherer Arche (limitArcBase)
		let FPBase = Math.round(FPValue * limitBase);
		let FPArc = Math.round(FPValue * limitArcBase);

		// Falls die höhere Arche mehr FP generiert (limitresults.length um nach 1, 2, 3... zu suchen)
		if( FPArc > (FPBase + limitresults.length)) {
			successCount++;

			// Suche 10 Fälle in Folge bei denen FPArc höher ist (um Ausreisser durch Rundung zu eliminieren)
			if (successCount > 10) {

				// Füge Ergebnis der Liste hinzu. Ab erstem Ergebnis wird konstant 1 FP mehr erzeugt, ab 2. 2 etc.
				limitresults.push(FPValue - 10);
				iterations++;

				// Füge Ergbebnisse in Tabelle ein
				$('#limitvalue' + iterations).text(FPValue - 10);
				$('#limitvaluebase' + iterations).text(FPBase - 10);
				$('#limitvaluearc' + iterations).text(FPArc - 10);

			}
		} else { 
			// Ist einmalig der FPArc Wert nicht grösser. Suchen wir weiter
			successCount = 0
		}

		// Die FP Menge wird in diesem Prozess langsam erhöht
		FPValue++;

	}

	$('#limitvaluebase').text(limitBase);
	$('#limitvaluearc').text(limitArcBase.toFixed(3));

}

















// Ende Custom changes
	
	
	
	
	
	
	
	
	
	
	
	
	

	/*
		FPArray: Benötig jeweils den P1 um die nachfolgenden zu berechnen.
		Bei neuem ZA: Hexadecimale Liste von http://graldron.bplaced.net/index.html (in main.js -> ArrayFP)
		Umformen http://www.kjetil-hartveit.com/blog/10/hex-binary-decimal-octal-and-ascii-converter (statt "," nur " ") und Resulat parsen (" " zu ", ").
	*/

// Orginal code
	
// Total FP
var ArrayFP = new Array(18);
ArrayFP[0] = new Array(0, 50, 70, 130, 200, 270, 330, 420, 490, 570, 650);	//KZ
ArrayFP[1] = new Array(0, 40, 60, 100, 150, 210, 270, 330, 380, 450, 510);	//BZ
ArrayFP[2] = new Array(0, 40, 60, 120, 170, 220, 290, 360, 420, 490, 550);	//EZ
ArrayFP[3]  = new Array(0, 50, 60, 120, 190, 240, 320, 380, 460, 530, 600);	//FMA
ArrayFP[4] = new Array(0, 50, 70, 130, 200, 270, 330, 420, 490, 570, 650);	//HMA
ArrayFP[5] = new Array(0, 50, 80, 140, 210, 290, 360, 440, 530, 610, 700);	//SMA
ArrayFP[6] = new Array(0, 50, 90, 150, 220, 310, 380, 480, 560, 650, 740);	//KOL
ArrayFP[7] = new Array(0, 60, 90, 150, 240, 330, 410, 500, 600, 690, 790);	//INDA
ArrayFP[8] = new Array(0, 60, 90, 170, 260, 340, 440, 530, 630, 740, 830);	//JHW
ArrayFP[9] = new Array(0, 60, 100, 180, 270, 360, 460, 560, 670, 770, 880);	//MOD
ArrayFP[10] = new Array(0, 60, 100, 180, 270, 360, 460, 560, 670, 770, 880);	//POST
ArrayFP[11] = new Array(0, 60, 100, 180, 270, 360, 460, 560, 670, 770, 880);	//GEG
ArrayFP[12] = new Array(0, 70, 100, 190, 280, 380, 480, 590, 710, 810, 930);	//MOR
ArrayFP[13] = new Array(0, 70, 110, 200, 290, 400, 510, 620, 740, 860, 970);	//ZU
ArrayFP[14] = new Array(0, 80, 120, 230, 340, 450, 580, 710, 850, 980, 1110);	//AZ
ArrayFP[15] = new Array(0, 80, 130, 240, 350, 470, 610, 740, 880, 1020, 1160);	//OZ
ArrayFP[16] = new Array(0, 90, 130, 240, 370, 490, 630, 770, 910, 1060, 1210);	//VZ
ArrayFP[17] = new Array(0, 90, 140, 250, 380, 520, 650, 800, 940, 1110, 1250);	//Mars
ArrayFP[18] = new Array(0, 90, 150, 260, 390, 540, 670, 830, 990, 1140, 1300);	//Asteroidengürtel

// P1 reward array use until find formula to calc p1
var ArrayP1 = new Array(17);
// no age
ArrayP1[0] = new Array(0, 5, 10, 15, 20, 30, 35, 45, 50, 60, 65, 75, 85, 95, 100, 110, 120, 130, 140, 150, 155, 165, 175, 185, 195, 205, 215, 225, 235, 245, 255, 265, 275, 285, 300, 310, 320, 330, 340, 350, 365, 375, 385, 395, 405, 420, 430, 440, 450, 465, 475, 485, 500, 510, 520, 535, 545, 555, 570, 580, 590, 605, 615, 630, 640, 650, 665, 675, 690, 700, 715, 725, 735, 750, 760, 775, 785, 800, 810, 825, 835, 850, 860, 875, 890, 900, 915, 925, 940, 950, 965, 975, 990, 1005, 1015, 1030);
//bz
ArrayP1[1] = new Array(0, 5, 10, 10, 15, 25, 30, 35, 40, 45, 55, 60, 65, 75, 80, 85, 95, 100, 110, 115, 125, 130, 140, 145, 155, 160, 170, 180, 185, 195, 200, 210, 220, 225, 235, 245, 250, 260, 270, 275, 285, 295, 300, 310, 320, 330, 340, 345, 355, 365, 375, 380, 390, 400, 410, 420, 430, 440, 445, 455, 465, 475, 485, 495, 505, 510, 520, 530, 540, 550, 560, 570, 580, 590, 600, 610, 620, 630, 640, 650, 660, 670, 680, 690, 700, 710, 720, 730, 740, 750, 760, 770, 780, 790, 800, 810, 820, 830, 840, 850, 860, 870, 880, 890, 905, 915, 925, 935, 945, 955, 965, 975, 985, 995);
//ez
ArrayP1[2] = new Array(0, 5, 10, 15, 20, 25, 30, 40, 45, 50, 60, 65, 70, 80, 85, 95, 105, 110, 120, 125, 135, 145, 150, 160, 170, 175, 185, 195, 200, 210, 220, 230, 240, 245, 255, 265, 275, 285, 290, 300, 310, 320, 330, 340, 350, 360, 370, 380, 390, 400, 405, 415, 425, 435, 450, 455, 465, 475, 485, 495, 510, 520, 530, 540, 550, 560, 570, 580, 590, 600, 610, 620, 630, 645, 655, 665, 675, 685, 695, 705, 720, 730);
//fma
ArrayP1[3] = new Array(0, 5, 10, 15, 20, 25, 35, 40, 50, 55, 65, 70, 80, 85, 95, 100, 110, 120, 130, 135, 145, 155, 165, 175, 180, 190, 200, 210, 220, 230, 240, 250, 255, 265, 275, 285, 295, 305, 315, 325, 335, 345, 360, 370, 380, 390, 400, 410, 420, 430, 440, 450, 465, 475, 485, 495, 505, 515, 525, 540, 550, 560, 570, 585, 595, 605, 615, 625, 640, 650, 660, 675, 685, 695, 705, 720, 730, 740, 755, 765, 775, 790, 800, 810, 825, 835, 850, 860, 875, 885, 895, 910, 920, 930, 945, 955, 970, 980, 995, 1005, 1015, 1030, 1040, 1055, 1065, 1080, 1090, 1105, 1115, 1130, 1140, 1155, 1165, 1180, 1190, 1205, 1215, 1230, 1240, 1255);
//hma
ArrayP1[4] = new Array(0, 5, 10, 15, 20, 30, 35, 45, 50, 60, 65, 75, 85, 95, 100, 110, 120, 130, 140, 150, 155, 165, 175, 185, 195, 205, 215, 225, 235, 245, 255, 265, 275, 285, 300, 310, 320, 330, 340, 350, 365, 375, 385, 395, 405, 420, 430, 440, 450, 465, 475, 485, 500, 510, 520, 535, 545, 555, 570, 580, 590, 605, 615, 630, 640, 650, 665, 675, 690, 700, 715, 725, 735, 750, 760, 775, 785, 800, 810, 825, 835, 850, 860, 875, 890, 900, 915, 925, 940, 950, 965, 975, 990, 1005, 1015, 1030, 1040, 1055, 1070, 1080, 1095);
//sma
ArrayP1[5] = new Array(0, 5, 10, 15, 25, 30, 40, 45, 55, 65, 70, 80, 90, 100, 110, 120, 125, 140, 150, 155, 170, 180, 190, 200, 210, 220, 230, 240, 250, 265, 275, 285, 295, 310, 320, 330, 340, 355, 365, 375, 390, 400, 410, 425, 435, 450, 460, 470, 485, 495, 510, 520, 535, 545, 560, 570, 585, 595, 610, 620, 635, 645, 660, 670, 685, 700, 710, 725, 735, 750, 765, 775, 790, 805, 815, 830, 845, 855, 870, 885, 895, 910, 925, 935, 950, 965, 980, 990, 1005, 1020, 1035, 1045, 1060, 1075, 1090, 1105, 1115, 1130, 1145, 1160, 1175, 1185, 1200, 1215, 1230, 1245, 1260, 1275, 1285);
//kolo
ArrayP1[6] = new Array(0, 5, 10, 15, 25, 35, 40, 50, 60, 65, 75, 85, 95, 105, 115, 125, 135, 145, 155, 170, 180, 190, 200, 210, 225, 235, 245, 260, 270, 280, 295, 305, 315, 330, 340, 350, 365, 375, 390, 400, 415, 425, 440, 450, 465, 480, 490, 505, 515, 530, 540, 555, 570, 580, 595, 610, 620, 635, 650, 665, 675, 690, 705, 715, 730, 745, 760, 775, 785, 800, 815, 830, 840, 855, 870, 885, 900, 915, 930, 940, 955, 970);
//inda
ArrayP1[7] = new Array(0, 10, 10, 20, 25, 35, 45, 50, 60, 70, 80, 90, 100, 115, 120, 135, 145, 155, 165, 180, 190, 200, 215, 225, 235, 250, 260, 275, 285, 300, 310, 325, 335, 350, 360, 375, 390, 400, 415, 425, 440, 455, 465, 480, 495, 505, 520, 535, 550, 560, 575, 590, 605, 520, 635, 645, 660, 675, 690, 705, 720, 735, 745, 760, 775, 790, 805, 820, 835, 850, 865, 880, 895, 910, 925, 940, 955, 970, 985, 1000, 1015);
//jhw
ArrayP1[8] = new Array(0, 10, 10, 20, 30, 35, 45, 55, 65, 75, 85, 95, 105, 120, 130, 140, 155, 165, 175, 190, 200, 215, 225, 240, 250, 265, 275, 290, 300, 315, 330, 340, 355, 370, 385, 395, 410, 425, 440, 450, 465, 480, 495, 510, 525, 535, 550, 565, 580, 595, 610, 625, 640, 655, 670, 685, 700, 715, 730, 745, 760, 775, 790, 805, 820, 835, 855, 870, 885, 900, 915, 930, 945, 965, 980, 995, 1010, 1025, 1045, 1060, 1075, 1090, 1110, 1125, 1140, 1160, 1175, 1190, 1205, 1225, 1240, 1255, 1275, 1290, 1305, 1325, 1340, 1355, 1375, 1390, 1410, 1425, 1440, 1460, 1475, 1490, 1510, 1525, 1545, 1560, 1580, 1595, 1615, 1630, 1650, 1665, 1685, 1700, 1715, 1735, 1755, 1770, 1790, 1805, 1825, 1840, 1860, 1875, 1895, 1915, 1930, 1950, 1965, 1985, 2000, 2020, 2040, 2055, 2075, 2095);
//moderne
ArrayP1[9] = new Array(0, 10, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100, 115, 125, 135, 150, 160, 175, 185, 200, 210, 225, 240, 250, 265, 280, 290, 305, 320, 335, 345, 360, 375, 390, 405, 420, 430, 450, 460, 475, 490, 505, 520, 535, 550, 565, 580, 600, 615, 630, 645, 660, 675, 690, 705, 725, 740, 755, 770, 785, 800, 820, 835, 850, 870, 885, 900, 915, 935, 950, 965, 985, 1000, 1015, 1035, 1050, 1065, 1085, 1100, 1120, 1135);
//post
ArrayP1[10] = new Array(0, 10, 10, 20, 30, 40, 50, 60, 75, 85, 95, 110, 120, 130, 145, 155, 170, 185, 195, 210, 225, 235, 250, 265, 280, 295, 305, 320, 335, 350, 365, 380, 395, 410, 425, 440, 455, 470, 485, 500, 515, 535, 550, 565, 580, 595, 615, 630, 645, 660, 675, 695, 710, 725, 745, 760, 775, 795, 810, 830, 845, 860, 880, 895, 915, 930, 945, 965, 985, 1000, 1020, 1035, 1050, 1070, 1090, 1105, 1125, 1140, 1160, 1175, 1195, 1215, 1230, 1250, 1265, 1285, 1305, 1320, 1340, 1360, 1375, 1395, 1415, 1435, 1450, 1470, 1490, 1510, 1525, 1545, 1565, 1585, 1600, 1620, 1640, 1660, 1680, 1695, 1715, 1735, 1755, 1775, 1790, 1810, 1830, 1850, 1870, 1890, 1910, 1930, 1950, 1965, 1985, 2005, 2025, 2045, 2065);
//gegen
ArrayP1[11] = new Array(0, 10, 15, 20, 30, 40, 55, 65, 75, 85, 100, 115, 125, 140, 150, 165, 180, 190, 205, 220, 235, 250, 265, 280, 290, 305, 320, 335, 355, 365, 385, 400, 415, 430, 445, 460, 480, 495, 510, 525, 545, 560, 575, 590, 610, 625, 645, 660, 675, 695, 710, 730, 745, 765, 780, 800, 815, 835, 850, 870, 885, 905, 920, 940, 960, 975, 995, 1015, 1030, 1050, 1070, 1085, 1105, 1125, 1140, 1160, 1180, 1200, 1215, 1235, 1255, 1275, 1290, 1310, 1330, 1350, 1370, 1390, 1410, 1425, 1445, 1465, 1485, 1505, 1525, 1545, 1565, 1580, 1600, 1625, 1640, 1660, 1680);
//morgen
ArrayP1[12] = new Array(0, 10, 15, 20, 35, 45, 55, 65, 80, 90, 105, 120, 130, 145, 160, 175, 185, 200, 215, 230, 245, 260, 275, 290, 305, 320, 335, 355, 370, 385, 400, 420, 435, 450, 465, 485, 500, 515, 535, 550, 570, 585, 605, 620, 640, 655, 675, 690, 710, 730, 745, 765, 780, 800, 820, 835, 855, 875, 890, 910, 930, 945, 965, 985, 1005, 1025, 1040, 1060, 1080, 1100, 1120, 1140, 1155, 1175, 1195, 1215, 1235, 1255, 1275, 1295, 1315, 1335, 1355, 1375, 1395, 1415);
//zu
ArrayP1[13] = new Array(0, 10, 15, 25, 35, 45, 60, 70, 85, 95, 110, 120, 135, 150, 165, 180, 195, 210, 225, 240, 255, 270, 290, 305, 320, 335, 355, 370, 385, 405, 420, 435, 455, 470, 490, 505, 525, 540, 560, 575, 595, 615, 630, 650, 670, 685, 705, 725, 740, 760, 780, 800, 815, 835, 855, 875, 895, 915, 930, 950, 970, 990, 1010, 1030, 1050, 1070, 1090, 1110, 1130, 1150, 1170, 1190, 1210, 1230, 1250, 1270, 1290, 1310, 1335, 1355, 1375, 1395, 1415, 1435, 1455, 1480, 1500, 1520, 1540, 1560, 1585, 1605, 1625, 1645, 1670, 1690, 1710, 1735, 1755, 1775, 1800, 1820, 1840, 1865, 1885, 1905, 1930, 1950, 1975, 1995, 2015, 2040, 2060, 2085, 2105, 2130, 2150, 2170, 2195, 2215, 2240, 2260, 2285, 2305, 2330, 2350, 2375, 2395, 2420, 2445, 2465, 2490, 2510, 2535, 2555, 2580, 2605, 2625, 2650, 2675, 2695, 2720, 2740, 2765, 2790);
//az
ArrayP1[14] = new Array(0, 10, 15, 25, 35, 45, 60, 75, 85, 100, 115, 130, 145, 160, 170, 190, 205, 220, 235, 250, 265, 285, 300, 315, 335, 350, 370, 385, 400, 420, 440, 455, 475, 490, 510, 525, 545, 565, 585, 600, 620, 640, 660, 675, 695, 715, 735, 755, 775, 795, 815, 830, 850, 870, 895, 910, 930, 950, 970, 995, 1015, 1035, 1055, 1075, 1095, 1115, 1135, 1155, 1180, 1200, 1220, 1240, 1260, 1285, 1305, 1325, 1350, 1370, 1390, 1410, 1435, 1455, 1475, 1500, 1520, 1545, 1565, 1585, 1610, 1630, 1650, 1675, 1695, 1720, 1740, 1765, 1785, 1810, 1830, 1855, 1875, 1900, 1920, 1945, 1965, 1990, 2015, 2035, 2060, 2080, 2105, 2125, 2150, 2175, 2195, 2220, 2245, 2265, 2290, 2315, 2335, 2360, 2385, 2405, 2430, 2455, 2480, 2500, 2525, 2550, 2575, 2595, 2620);
//oz
ArrayP1[15] = new Array(0, 10, 15, 25, 35, 50, 65, 75, 90, 105, 120, 135, 150, 165, 180, 195, 210, 230, 245, 260, 280, 295, 310, 330, 350, 365, 385, 400, 420, 440, 455, 475, 495, 510, 530, 550, 570, 590, 605, 625, 645, 665, 685, 705, 725, 745, 765, 785, 805, 825, 845, 865, 890, 910, 930, 950, 970, 990, 1015, 1035, 1055, 1075, 1100, 1120, 1140, 1160, 1185, 1205, 1225, 1250, 1270, 1295, 1315, 1335, 1360, 1380, 1405, 1425, 1450, 1470, 1495, 1515, 1540, 1560, 1585, 1605, 1630, 1650, 1675, 1700, 1720, 1745, 1770, 1790, 1815, 1835, 1860, 1885, 1905, 1930, 1955, 1980, 2000, 2025);
//VZ
ArrayP1[16] = new Array(0, 10, 15, 25, 40, 50, 65, 80, 95, 110, 125, 140, 155, 170, 185, 205, 220, 235, 255, 270, 290, 305, 325, 345, 360, 380, 400, 415, 435, 455, 475, 495, 510, 530, 550, 570, 590, 610, 630, 650, 670, 690, 715, 735, 755, 775, 795, 815, 840, 860, 880, 900, 925, 945, 965, 990, 1010, 1030, 1055, 1075, 1095, 1120, 1140, 1165, 1185, 1210, 1230, 1255, 1275, 1300, 1320, 1345, 1365, 1390, 1415, 1435, 1460, 1485, 1505, 1530, 1555, 1575, 1600, 1625, 1645, 1670, 1695, 1720, 1745, 1765, 1790, 1815, 1840, 1860, 1885, 1910, 1935, 1960, 1985, 2010, 2030, 2055, 2080, 2105, 2130, 2155, 2180, 2205, 2230);
//Mars
ArrayP1[17] = new Array(0, 10, 15, 25, 40, 55, 70, 80, 95, 115, 125, 145, 160, 175, 195, 210, 230, 245, 265, 280, 300, 320, 335, 355, 375, 395, 415, 435, 455, 470, 490, 510, 535, 550, 575, 595, 615, 635, 655, 675, 700, 720, 740, 760, 785, 805, 825, 850, 870, 890, 915, 935, 960, 980, 1005, 1025, 1050, 1070, 1095, 1115, 1140, 1160, 1185, 1210, 1230, 1255, 1280, 1300, 1325, 1350, 1370, 1395, 1420, 1445, 1470, 1490, 1515, 1540, 1565, 1590, 1615, 1635, 1660, 1685);
//Asteroidengürtel
ArrayP1[18] = new Array(0, 10, 15, 30, 40, 55, 70, 85, 100, 115, 130, 150, 165, 185, 200, 220, 235, 255, 275, 295, 310, 330, 350, 370, 390, 410, 430, 450, 470, 490, 510, 530, 550, 575, 595, 615, 635, 660, 680, 700, 725, 745, 770, 790, 810, 835, 855, 880, 905, 925, 950, 970, 995, 1015, 1040, 1065, 1085, 1110, 1135, 1160, 1180, 1205, 1230, 1255, 1275, 1300, 1325, 1350, 1375, 1400, 1425, 1450, 1470, 1500, 1520, 1545, 1570, 1595, 1620, 1650, 1670, 1695, 1725, 1750, 1775, 1800, 1825, 1850, 1875, 1900);



//event listener lg table

//document.getElementById("gbselect").addEventListener("change", recalc);
//document.getElementById("gblevel").addEventListener("change", recalc);

document.getElementById("p1factor").addEventListener("change", recalc);
document.getElementById("p2factor").addEventListener("change", recalc);
document.getElementById("p3factor").addEventListener("change", recalc);
document.getElementById("p4factor").addEventListener("change", recalc);
document.getElementById("p5factor").addEventListener("change", recalc);

document.getElementById("external1").addEventListener("change", recalc);
document.getElementById("external2").addEventListener("change", recalc);
document.getElementById("external3").addEventListener("change", recalc);
document.getElementById("external4").addEventListener("change", recalc);
document.getElementById("external5").addEventListener("change", recalc);

//event listener outbid
document.getElementById("outbidgbtotal").addEventListener("change", calcoutbid);
document.getElementById("outbidbgfp").addEventListener("change", calcoutbid);
document.getElementById("outbidfp").addEventListener("change", calcoutbid);

//event listener calcsk
document.getElementById("ownarcfactor").addEventListener("change", calcsk);
document.getElementById("ownarcbasefp").addEventListener("change", calcsk);

//event listener copy
$('#copyUsername').keyup(function(){
	localStorage.setItem("LGCopyUsername", $(this).val());
	recalc();
})
$('#copyP1, #copyP2, #copyP3, #copyP4, #copyP5').click(function(){
	$(this).toggleClass('active');
	recalc();
	})
$('#copyButton').click(function(){
	copyToClipboard('#copyOutput');
})

function copyToClipboard(element) {
    var $temp = $("<input>");
    $("body").append($temp);
    $temp.val($(element).val()).select();
    document.execCommand("copy");
    $temp.remove();
}

var hasStorage = false;
//var storedfactor = 0;
//var gbfactor = 0.0;
// first run init
function init()
{
	
	// test if local storage is available
	hasStorage = (function() 
	{
    try
	{
        localStorage.setItem("locstore", "true");
        localStorage.removeItem("locstore");
        return true;		
    } 
	catch (exception) 
	{
        return false;			
    }
	}());
	
	// set externals to 0
	$('#external1 #external2 #external3 #external4 #external5').val("0");
	
	// if local storage is available load data if found
	if (hasStorage)
	{

		if(localStorage.getItem("storedgb") !== null)
		{			
			//document.getElementById("gbselect").selectedIndex = parseInt(localStorage.storedgb);
		}
		if(localStorage.getItem("storedpfactor0") !== null)
		{			
			document.getElementById("p1factor").value = parseFloat(localStorage.storedpfactor0);
		}
		if(localStorage.getItem("storedpfactor1") !== null)
		{			
			document.getElementById("p2factor").value = parseFloat(localStorage.storedpfactor1);
		}
		if(localStorage.getItem("storedpfactor2") !== null)
		{			
			document.getElementById("p3factor").value = parseFloat(localStorage.storedpfactor2);
		}
		if(localStorage.getItem("storedpfactor3") !== null)
		{			
			document.getElementById("p4factor").value = parseFloat(localStorage.storedpfactor3);
		}
		if(localStorage.getItem("storedpfactor4") !== null)
		{			
			document.getElementById("p5factor").value = parseFloat(localStorage.storedpfactor4);
		}
		if(localStorage.getItem("storedlevel") !== null)
		{			
			//document.getElementById("gblevel").value = parseInt(localStorage.storedlevel);
		}
		if(localStorage.getItem("storedownarcfactor") !== null)
		{			
			document.getElementById("ownarcfactor").value = parseFloat(localStorage.storedownarcfactor);
		}
        if(localStorage.getItem("storedmembers") !== null)
		{			
			document.getElementById("members").value = parseFloat(localStorage.storedmembers);
		}
	   if(localStorage.getItem("storedownscore") !== null)
		{			
			document.getElementById("ownscore").value = parseFloat(localStorage.storedownscore);
		}
        if(localStorage.getItem("storedforeignscore") !== null)
		{			
			document.getElementById("foreignscore").value = parseFloat(localStorage.storedforeignscore);
		}
        if(localStorage.getItem("storedmembers1") !== null)
		{			
			document.getElementById("members1").value = parseFloat(localStorage.storedmembers1);
		}
        if(localStorage.getItem("limitbase") !== null)
		{			
			document.getElementById("limitbase").value = localStorage.limitbase;
		}
		if(localStorage.getItem("limitarc") !== null)
		{			
			document.getElementById("limitarc").value =localStorage.limitarc;
		}
	}
	
	//Put username to copyUser
	$('#copyUsername').val(localStorage.getItem("LGCopyUsername"));
	
	limitCalc();

	recalc();
}



function recalc()
{
	var gbLevelField = $('.usedForCalculation .LGListItemLevel');
	var gbSelectField = $('.usedForCalculation .LGListItemName');

	var tempfac;
	for (var i = 0; i < 5 ; i++)
	{
		tempfac = parseFloat(document.getElementById("p"+(i+1)+"factor").value);	
		if (tempfac < 1.79)		
		{
			tempfac = tempfac.toFixed(2);		
			document.getElementById("p"+(i+1)+"factor").value = tempfac;
			document.getElementById("p"+(i+1)+"factor").step = 0.01;
		}
		else
		{
			document.getElementById("p"+(i+1)+"factor").step = 0.005;
		}
	}
	
	
	
	// factors p1-p5	
	var pfactor = new Array()
	pfactor.push(parseFloat(document.getElementById("p1factor").value));	
	pfactor.push(parseFloat(document.getElementById("p2factor").value));	
	pfactor.push(parseFloat(document.getElementById("p3factor").value));	
	pfactor.push(parseFloat(document.getElementById("p4factor").value));	
	pfactor.push(parseFloat(document.getElementById("p5factor").value));	
	
	
			
	// level of gb
	var GBlvlselect = gbLevelField.val();	
	// if level set < 1 force lvl to 1
	if (GBlvlselect < 1)
	{		
		GBlvlselect = 1;
		gbLevelField.val(1);
	}		
	
	// total fp of gb at lvl
	var GBFP = 0;
	var GBage = gbSelectField.val();
	
	if (GBage == undefined){ GBage = 0};
	
	
	
	
	
	// base reward table
	var pbonus = new Array();
	//check if selected level is valid for available p1 reward array, if not set to max possible level			
	if(GBlvlselect < ArrayP1[GBage].length)
	{
		pbonus.push(parseInt(ArrayP1[GBage][GBlvlselect]));
	}
	else
	{
		pbonus.push(parseInt(ArrayP1[GBage][ArrayP1[GBage].length-1]));
		GBlvlselect = ArrayP1[GBage].length-1;
		gbLevelField.val(GBlvlselect);		
	}	
	
	// if lvl <11 take fp from array, >11 calc it
	if(GBlvlselect < 11)
	{			
		GBFP = ArrayFP[GBage][GBlvlselect];			
	}
	else
	{			

		GBFP = Math.ceil(ArrayFP[GBage][10]*Math.pow(1.025 , GBlvlselect-10));
		
	}
	//display total fp
	document.getElementById("totalfpdisplay").innerHTML = GBFP;	
	
	// remaining base rewards	
	pbonus.push(5*Math.round((pbonus[0]/2)/5));
	pbonus.push(5*Math.round((pbonus[1]/3)/5));
	pbonus.push(5*Math.round((pbonus[2]/4)/5));
	pbonus.push(5*Math.round((pbonus[3]/5)/5));
	
	document.getElementById("p1bonus").innerHTML = pbonus[0];
	document.getElementById("p2bonus").innerHTML = pbonus[1];	
	document.getElementById("p3bonus").innerHTML = pbonus[2];
	document.getElementById("p4bonus").innerHTML = pbonus[3];
	document.getElementById("p5bonus").innerHTML = pbonus[4];
		
	// cost with factor table
	var pcost = new Array();
	for (var i = 0; i < pfactor.length; i++)
	{		
		pcost.push(parseInt(Math.round(pbonus[i] * pfactor[i])));
	}
		
	document.getElementById("p1cost").innerHTML = pcost[0];
	document.getElementById("p2cost").innerHTML = pcost[1];
	document.getElementById("p3cost").innerHTML = pcost[2];
	document.getElementById("p4cost").innerHTML = pcost[3];
	document.getElementById("p5cost").innerHTML = pcost[4];	
	
		
	// external fp	
	var external1 = parseInt(document.getElementById("external1").value);
	var external2 = parseInt(document.getElementById("external2").value);
	var external3 = parseInt(document.getElementById("external3").value);
	var external4 = parseInt(document.getElementById("external4").value);
	var external5 = parseInt(document.getElementById("external5").value);
	
	// used to take elements from
	var externals = new Array(external1,external2,external3,external4,external5);
	externals.sort(function(a, b){return b-a});
	
	// used for calcing save (highest external that counts)
	var externals2 = new Array(external1,external2,external3,external4,external5);
	externals2.sort(function(a, b){return b-a});
	
	//sum all externals
	var sumexternals= 0;
	for(var i = 0; i < externals2.length; i++)
	{
		sumexternals += externals2[i];
	}
	
	// choose who takes which spot
	var ptaker = new Array(0,0,0,0,0);	
	for (var i = 0; i < ptaker.length; i++)
	{
		for (var j = 0; j < externals.length; j++)
		{
			if(externals[j] >= pcost[i])
			{
				ptaker[i] = externals[j];
				externals.splice(j, 1);			
				break;
			}
		}	
	}
	
	var pfinal  = new Array(0,0,0,0,0);	
	//eval all spots
	for (var i = 0; i < ptaker.length ; i++)
	{		
		// external takes spot
		if(ptaker[i] > 0)
		{			
			document.getElementById(("p"+(i+1)+"ext")).innerHTML = ptaker[i];
			pfinal[i] = ptaker[i];
		}	
		// internal takes spot
		else
		{
			document.getElementById(("p"+(i+1)+"ext")).innerHTML = "-";				
			pfinal[i] = pcost[i];				
		}
	}
	
	
	//fp needed by owner
	var selfinvest = new Array(0,0,0,0,0);
	// relative selfinvest
	var relativeinvest = new Array(0,0,0,0,0);
	//
	var prest = new Array();
	for(var i = 0; i < 5; i++)
	{				
		// finds highest to beat			
		for (var j = 0; j < externals2.length; j++)
		{
			// calc selfinvest
			if(pcost[i] > externals2[j] || externals2[j] === 0)
			{				
				selfinvest[i] = (GBFP + externals2[j] - pcost[i]*2 - sumexternals);
				for (var k = 0; k < i ; k++)
				{	
					if(ptaker[k] < 1)
						selfinvest[i] -= pfinal[k];						
				}

				break;
			}
		}
		
		
		
		
		
	}
	
	//calc&display save
	var tempselfmax = 0;
	for (var i = 0; i < 5; i++)
	{
		if (ptaker[i] < 1)
		{
			if(selfinvest[i] > tempselfmax)
			{
				relativeinvest[i] = selfinvest[i] - tempselfmax;
				tempselfmax = selfinvest[i];
				document.getElementById(("p"+(i+1)+"save")).innerHTML = "+"+relativeinvest[i];
				if(pcost[i] === 0)
				{
					document.getElementById(("p"+(i+1)+"self")).innerHTML = "!" + selfinvest[i] + "!";
				}
				else
				{
					document.getElementById(("p"+(i+1)+"self")).innerHTML = selfinvest[i];
				}	
			}
			else
			{
			relativeinvest[i] = selfinvest[i] - tempselfmax;
				document.getElementById(("p"+(i+1)+"save")).innerHTML ="Sicher";
				document.getElementById(("p"+(i+1)+"self")).innerHTML =relativeinvest[i];
			}
		}
		else
		{
			document.getElementById(("p"+(i+1)+"save")).innerHTML ="-";
			document.getElementById(("p"+(i+1)+"self")).innerHTML ="-";
		}
	}
	
	// save data if local storage is available	
	if (hasStorage)
	{		
		//localStorage.setItem("storedgb", document.getElementById("gbselect").selectedIndex);		
		//localStorage.setItem("storedlevel", GBlvlselect);	
		for ( var i = 0; i < pfactor.length; i++)
		{
			localStorage.setItem(("storedpfactor"+i), pfactor[i]);	
		}		
		
	}
	
	// Put data to copy input field
	var copyUsername = $('#copyUsername').val()
	var copyCurrentLG = $('.usedForCalculation .LGListItemName option:selected').text().trim();
	var copyOutputText = copyUsername + ' ' +  copyCurrentLG;
	for (var i = 5; i >= 0 ; i--){
		let platz = i+1;
		if ($('#copyP'+platz).hasClass('active')) {
			copyOutputText += ' P' + platz + ' (' + pfinal[i] + ')';
		}
	}
	$('#copyOutput').val(copyOutputText);
	
}









document.addEventListener("DOMContentLoaded", function () {
	var form = document.getElementById("calc"),
		out = document.querySelector("#calc output"),
		overwrite = true;

	function result(noDisplay) {
		var input = out.value,
			r = 0;
		// replace Ãƒâ€” with * and ÃƒÂ· with / for eval()
		input = input.replace(/Ãƒâ€”/g, "*")
			.replace(/ÃƒÂ·/g, "/");
		// remove anything else that is not allowed here
		input = input.replace(/[^0-9. +\-*\/]/g, "");
		try {
			r = eval(input);
		} catch (e) {
			r = 0;
		}
		if (noDisplay !== true) {
			out.value = r;
			overwrite = true;
		}
		return r;
	}

	function extra(type) {
			switch (type) {
			case "Ã¢Ë†Å¡":
				out.value = Math.sqrt(result(true));
				break;
			case "xÃ‚Â²":
				out.value = Math.pow(result(true), 2);
				break;
			case "ln":
				out.value = Math.log(result(true));
				break;
			}
			overwrite = true;
		}
		// initialize only if <output> is found and browser supports Array.from()
	if (out && typeof Array.from == "function") {
		form.addEventListener("submit", function (ev) {
			// prevent form submission and page reload
			ev.preventDefault();
			ev.stopPropagation();
			return false;
		});
		// button functionalities
		Array.from(document.querySelectorAll("#calc button"))
			.forEach(function (b) {
				var c = b.textContent;
				switch (c) {
				case "9":
				case "8":
				case "7":
				case "6":
				case "5":
				case "4":
				case "3":
				case "2":
				case "1":
				case "0":
				case ".":
					b.addEventListener("click", function () {
						// remove leading zero?
						if (overwrite) {
							out.value = (c == "." ? "0." : c);
						} else {
							out.value += c;
						}
						overwrite = false;
					});
					break;
				case "+":
				case "-":
				case "Ãƒâ€”":
				case "ÃƒÂ·":
					b.addEventListener("click", function () {
						out.value += " " + c + " ";
						overwrite = false;
					});
					break;
				case "Ã¢Ë†Å¡":
				case "xÃ‚Â²":
				case "ln":
					b.addEventListener("click", function () {
						extra(c);
					});
					break;
				case "=":
					b.addEventListener("click", result);
					break;
				case "C":
					b.addEventListener("click", function () {
						out.value = 0;
						overwrite = true;
					});
					break;
				}
			});
	}
});






function calcGE()
{
	var members = parseInt(document.getElementById("members").value);
    var ownscore = parseFloat(document.getElementById("ownscore").value);
	var foreignscore = parseFloat(document.getElementById("foreignscore").value);
	{    
    var station = Math.round(((members*48/100)*(ownscore-foreignscore)) * 100) / 100;    
    document.getElementById("stationneed").innerHTML = station;
	}
    if (hasStorage)
	{
		localStorage.setItem("storedmembers", members);
        localStorage.setItem("storedownscore", ownscore);
        localStorage.setItem("storedforeignscore", foreignscore);
	}
}

function calcGEprozent()
{
	var members1 = parseInt(document.getElementById("members1").value);
    var openstation = parseFloat(document.getElementById("openstation").value);
	{    
    var openstationpercent = Math.round((openstation/(members1*48/100)) * 1000) / 1000;    
    document.getElementById("openstationepercentout").innerHTML = openstationpercent;
	}
    if (hasStorage)
	{
		localStorage.setItem("storedmembers1", members1);
        localStorage.setItem("storedopenstation", openstation);
	}
}

function calcoutbid()
{
	var outbidgbtotal = parseInt(document.getElementById("outbidgbtotal").value);
	var outbidbgfp = parseInt(document.getElementById("outbidbgfp").value);
	var outbidfp = parseInt(document.getElementById("outbidfp").value);
	
	// no sense input: fp invested cant be higher than total fp gb can take
	if(outbidgbtotal < outbidbgfp)
	{
		document.getElementById("outbidneedfp").innerHTML = "Eingabefehler: Gesamt-FP < FP in LG";
	}
	// no sense input fp to outbid cant be higher than total fp invested
	else if(outbidbgfp < outbidfp)
	{
		document.getElementById("outbidneedfp").innerHTML = "Eingabefehler: FP in LG < Zu überbieten";
	}
	// not enough fp left to outbid
	else if(outbidgbtotal - outbidbgfp <= outbidfp)
	{
		document.getElementById("outbidneedfp").innerHTML = "nicht möglich";
	}	 
	else
	{		
		var neededfp = Math.ceil((outbidgbtotal-outbidbgfp+outbidfp)/2);
		document.getElementById("outbidneedfp").innerHTML = neededfp;		
	}
		
}


function calcsk()
{	
	// check if factor stepping needs to change		
	var tempfac = parseFloat(document.getElementById("ownarcfactor").value);	
	if (tempfac < 1.79)		
	{
		tempfac = tempfac.toFixed(2);		
		document.getElementById("ownarcfactor").value = tempfac;
		document.getElementById("ownarcfactor").step = 0.01;
	}
	else
	{
		document.getElementById("ownarcfactor").step = 0.005;
	}	
	
	var ownarcfactor = parseFloat(document.getElementById("ownarcfactor").value);
	var ownarcbasefp = parseInt(document.getElementById("ownarcbasefp").value);
	document.getElementById("ownarcneedfp").innerHTML = ( Math.round(ownarcfactor*ownarcbasefp));
	if (hasStorage)
	{
		
		localStorage.setItem("storedownarcfactor", ownarcfactor);	
	}
}

window.onload = init;
	</script>
<style>
#container
{
    margin:0 auto;
    width:600px;

}
h1
{ 
font-size: 2em;
font-family: Helvetica, Arial, sans-serif;
width:100%; 

text-align: center;
}
h2
{ 
font-size: 1.2em;
font-family: Helvetica, Arial, sans-serif;
width:100%;

text-align: center;
}
h3
{ 
font-size: 1.2em;
font-family: Helvetica, Arial, sans-serif;
width:100%;

text-align: left;
}
h4
{ 
font-size: 1.8em;
font-family: Helvetica, Arial, sans-serif;
width:100%; 

text-align: center;
}
 th, td { border: thin solid; }
 
 #noscript
 {	 
	background-color: black;
	 color: red;
 }
 
#arcboosttable, #externaltable, #limittable
{ 
	font-size: 1.1em;
font-family: Helvetica, Arial, sans-serif; 
	border-collapse: collapse; 
	border-width: thin;
	border-style: solid;
	background-color: #f2f2f2 ;
	padding-right: 1em;	
	margin-right: 1em;
	text-align:center; 
    vertical-align:middle;
	display: inline-table;
}


.gbtext 
{
	display: inline-block;
	color: #000000 ;	
	font-size: 1.1em;
font-family: Helvetica, Arial, sans-serif;	
	margin-right: 0.5em;
    margin-left : 0.5em;	
	
}
.totbox
{
	margin : 0.2em;
	padding :0;
	display: inline-block;
	color: #000000 ;	
	font-size: 1.1em;
font-family: Helvetica, Arial, sans-serif; 	
		
	
}
.extbox
{
	margin : 0.2em;
	padding :0;
	display: inline-block;
	color: #000000 ;	
	font-size: 1.1em; 	
		
}
#gbselect , #gbselect2, #secondValueLG
{ 
	
	font-size: 1.1em;
font-family: Helvetica, Arial, sans-serif;
	background-color: #f2f2f2 ;	
	text-align:right; 
	
}
.outerdiv
{

	width: 100%;
	display: inline-block;
}
#pselect
{ 
	
	font-size: 1.1em; 
	background-color: #f2f2f2 ;	
	text-align:right; 
}
#limittable {
	margin: 20px;
}
#limittable input {
	width: 60px;
}
#limittable td { 
	min-width: 40px;
}
#limitbase {
	margin: 10px auto;
}



#gblevel , #gbfactor, #copyOutput , #extfp , #outbidgbtotal , #secondValueLevel, #outbidbgfp , #outbidfp, #ownarcfactor, #ownarcbasefp, #limitbase, #limitarc
{	
	background-color: #f2f2f2 ;	
	font-size: 1.1em;
font-family: Helvetica, Arial, sans-serif; 		
	
}
#members , #ownscore , #foreignscore
{	
	background-color: #f2f2f2 ;	
	font-size: 1.1em; 		
	font-family: Helvetica, Arial, sans-serif;
}

#members1 , #openstation 
{	
	background-color: #f2f2f2 ;	
	font-size: 1.1em; 		
	font-family: Helvetica, Arial, sans-serif;
}

.cc-privacy {text-align: justify;}
.imprint {text-align: justify;}
.j-static-page {text-align: justify;}
.imprint-about {text-align: justify;}

footer
{
        width:600px;
        vertical-align: center;	
	font-size: 1em;
        font-family: Helvetica, Arial, sans-serif; 
	color: #000000 ;
}

#p1factor ,#p2factor, #p3factor, #p4factor, #p5factor, #external1, #external2, #external3, #external4, #external5
{
	text-align:center; 
	font-size: 1em;
        font-family: Helvetica, Arial, sans-serif;
	vertical-align: center;
	background-color: #f2f2f2 ;	
}

a.class1:link
{
font-size: 11px;
color:#CBE6A8;
text-decoration:none;
}
a.class1:visited
{
font-size: 11px;
color:#CBE6A8;
text-decoration:none;
}
a.class1:hover
{
color:#5da7f1;
font-weight:bold;
font-size:11.5px;
text-decoration:none;
}
a.class2:link
{
font-size: 12px;
color:#CBE6A8;
text-decoration:none;
}
a.class2:visited
{
font-size: 12px;
color:#CBE6A8;
text-decoration:none;
}
a.class2:hover
{
color:#5da7f1;
font-weight:bold;
font-size:12.5px;
text-decoration:none;
}
a.class3:link
{
font-size: 18px;
color:#CBE6A8;
text-decoration:none;
}
a.class3:visited
{
font-size: 18px;
color:#CBE6A8;
text-decoration:none;
}
a.class3:hover
{
color:#5da7f1;
font-weight:bold;
font-size:18.5px;
text-decoration:none;
}
a.class4:link
{
font-size: 1em;
color:#000000;
text-decoration:none;
}
a.class4:visited
{
font-size: 1em;
color:#000000;
text-decoration:none;
}
a.class4:hover
{
color:#163963;
font-weight:bold;
font-size:1.1em;
text-decoration:none;
}
a.class5:link
{
font-size: 12px;
color:#FE8B65;
text-decoration:none;
}
a.class5:visited
{
font-size: 12px;
color:#FE8B65;
text-decoration:none;
}
a.class5:hover
{
color:#5da7f1;
font-weight:bold;
font-size:12.5px;
text-decoration:none;
}


body 
{
	padding: 0;
	margin: 0;
	width: 100%;
	height: 100%;
	white-space: nowrap;
}

@charset "utf-8";



body {}

body, p, table, td
{
    font:normal 16px/140% Helvetica, Arial, sans-serif;
    color:black;
}

input, textarea
{
    font:normal 16px/140% Helvetica, Arial, sans-serif;
}

h1
{
    font:normal normal bold 17px/140% Helvetica, Arial, sans-serif;
    color:#000000;
    
}

h2
{
    font:normal normal bold 11px/140% Helvetica, Arial, sans-serif;
    color:#000000;
    text-align:center;
}

h3
{
    font:normal normal normal 11px/140% Helvetica, Arial, sans-serif;
    color:#000000;
    
}

.setFactorsContainer {
	margin: 10px 0 0 0;
}

a:link,
a:visited
{
    text-decoration: underline; /* fix */
    color:#000000;
}

a:active,
a:hover
{
    text-decoration:none; /* fix */
    color:#000000;
}

button:focus {outline:0;}

div.hr
{
    border-bottom-style:solid;
    border-bottom-width:1px; /* fix */
    border-color: #8a5622;
    height: 1px;
}

.secondValue{
	margin-bottom: 10px;
}

#LGValues {
    position: relative;
    margin: 0 auto;
    width: 650px;
}

.floatie {
	float: left;
}

.dummyItem{
	display: none;
}

.usedForCalculation {
	background: #15ff1587;
}

#copyOutput{
	margin-top: 10px;
}

.active{
	background-color: #15ff1587;;
}

</style>
</body>
</html>